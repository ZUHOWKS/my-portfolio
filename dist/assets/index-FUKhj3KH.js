import*as r from"https://threejs.org/build/three.module.js";import{RenderPass as Y,EffectComposer as z,UnrealBloomPass as B}from"https://threejs.org/examples/jsm/Addons.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))i(e);new MutationObserver(e=>{for(const n of e)if(n.type==="childList")for(const a of n.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function t(e){const n={};return e.integrity&&(n.integrity=e.integrity),e.referrerPolicy&&(n.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?n.credentials="include":e.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function i(e){if(e.ep)return;e.ep=!0;const n=t(e);fetch(e.href,n)}})();const S={threshold:0,strength:1,radius:.5,exposure:1},h=new r.Scene,c=new r.PerspectiveCamera(75,window.innerWidth/(window.innerHeight-100),.1,1e3),f=new r.WebGLRenderer;f.setSize(window.innerWidth,window.innerHeight);document.querySelector("#holo-sphere").appendChild(f.domElement);const I=new r.DirectionalLight(268435455,.75);I.position.set(5,5,5);const O=new r.AmbientLight(268435455,.2);h.add(I,O);const A=new Y(h,c),x=new z(f),M=new B(new r.Vector2(window.innerWidth,window.innerHeight),1.5,.4,.85);M.threshold=S.threshold;M.strength=S.strength;M.radius=S.radius;x.addPass(A);x.addPass(M);c.position.set(0,0,0);f.render(h,c);const P=new r.Color(14598399),R=new r.Color(16777215);let L=0,E=0;const C=[];_();v();function W(o,s){if(window.scrollY<300||1100<=window.scrollY&&window.scrollY<=1500){const t=window.innerWidth/2,i=window.innerHeight/2;let e=583e-7;1100<window.scrollY&&(e*=-1),L=(i-o.clientY)*e,E=(t-o.clientX)*e,s.rotation.x=L,s.rotation.y=E,f.render(h,s)}}function w(o,s,t,i,e,n=Math.PI/5){const a=new r.Mesh(o,s),m=Math.cos(Math.PI*2*t)*i,l=Math.sin(Math.PI*2*t)*i,d=Math.sin(n)*e;a.position.x=m,a.position.y=l,a.position.z=d,h.add(a),C.push(a)}function _(){new r.ShaderMaterial({fragmentShader:haloFragment,vertexShader:haloVertex});const o=new r.MeshBasicMaterial({color:P}),s=new r.SphereGeometry(.25,12,10),t=15,i=6,e=10;for(let l=1;l<=e;l++){let d=i+5*(e-1-l),y=t*(e-l)/e;for(let g=0;g<d;g++){let b=g/d;w(s,o.clone(),b,y,t,-Math.PI*l/(2*e)),w(s,o.clone(),b,y,t,Math.PI*l/(2*e))}}let n=i+5*e;for(let l=0;l<n;l++){let d=l/n;w(s,o.clone(),d,t,-1,Math.PI/2)}w(s,o.clone(),0,0,t,-Math.PI/2),w(s,o.clone(),0,0,t,Math.PI/2);const a=new r.SphereGeometry(t+1,32,32),m=new r.MeshBasicMaterial({color:P});new r.Mesh(a,m),f.render(h,c)}function H(){x.render(),requestAnimationFrame(H)}H();addEventListener("mousemove",o=>W(o,c));function v(){let o=window.scrollY||0;const s=100,t=300,i=1100,e=1600,n=2400;s<=o&&o<t?c.position.z=Math.min(3,o*3/300):t<=o&&o<=i&&(u(o-t,i-t,3),p(o-t,200,new r.Color(1,1,1),new r.Color(37,1,87))),i<o&&o<e&&(u(o-t,i-t,3),p(o-t,200,new r.Color(1,1,1),new r.Color(37,1,87))),e<=o&&o<=n+200?(u(n-o,n-e,5),p(o-e-475,585,new r.Color(37,1,87),new r.Color(255,255,255)),C.forEach(a=>{Math.random()<.0373&&(a.material.color=R)})):C.forEach(a=>{Math.random()<.0473&&(a.material.color=P)}),n<o&&(u(n-o,n-e,5),p(o-e-475,585,new r.Color(37,1,87),new r.Color(255,255,255)))}function p(o,s,t,i){let e=Math.min(1,Math.max(0,o/s)),n=Math.round(t.r+(i.r-t.r)*e),a=Math.round(t.g+(i.g-t.g)*e),m=Math.round(t.b+(i.b-t.b)*e);h.background=new r.Color("rgb("+n+","+a+","+m+")")}function u(o,s,t){const i=Math.log(20),e=Math.log(25);c.position.z=Math.min(31,(Math.log(Math.max(Math.exp(i),o))-i)*30.5/(Math.log(s)-i)+t),c.rotation.z=Math.min(Math.PI,(Math.log(Math.max(Math.exp(e),o))-e)*Math.PI/(Math.log(s)-e))}addEventListener("scroll",o=>v());
